---
title: "Ecotypes"
author: "Joe Thorley and Ayla Pearson"
date: "`r Sys.Date()`"
bibliography: bibliography.bib
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Ecotypes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.width = 4
)
```

## Ecotypes

In the `ypr` package a population is considered to be group of interbreeding fish that are indistinguishable to anglers while ecotypes are subgroupings of individuals that follow alternative life-history strategies.
Consequently, ecotypes must share the key stock recruitment (`BH`, `RK`, `tR` and `Rmax`) and fishery (`pi`, `Llo`, `Lup`, `Nc`, `rho`, `Hm` and `q`) parameters.
In order to use a yield-per-recruit approach it is also necessary to assume that the relative proportion of recruits (`RPR`) adopting each life-history strategy is independent of the parental stock.

## Two Ecotypes

Consider a population with a rarer smaller, fast-growing, earlier-maturing ecotype and a more common larger, slow-growing later-maturing ecotype.

```{r}
library(ypr)
library(ggplot2) # for plotting

population <- ypr_ecotypes(
  Linf = c(50, 100), 
  k = c(0.2, 0.15), 
  Ls = c(20, 50), 
  names = c("small", "large"),
  RPR = c(0.3, 0.7))

ypr_plot_schedule(population) + scale_color_manual(values = c("black", "blue"))
ypr_tabulate_schedule(population)
```

### Fish

```{r, fig.width=6, fig.height=4}
ypr_plot_fish(population, color = "white")
ypr_tabulate_fish(population)
```

### Stock-Recruitment

```{r, fig.width=6, fig.height=4}
ypr_plot_sr(population)
ypr_tabulate_sr(population)
```

### Yield

```{r, fig.width=6, fig.height=4}
#ypr_tabulate_yield(population)
#ypr_plot_yield(population)
```

